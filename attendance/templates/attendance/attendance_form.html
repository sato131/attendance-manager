<!--å‹¤æ€ ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ -->

{% extends 'attendance/base.html' %} {% block content %}
<div class="attendance-form-container">
  <h2 class="form-title">
    {% if form.instance.pk %}å‹¤æ€ ã‚’ç·¨é›†ã™ã‚‹{% else %}å‹¤æ€ ã‚’ç™»éŒ²ã™ã‚‹{% endif %}
  </h2>

  <form method="post" class="attendance-form">
    {% csrf_token %}

    <div class="form-group clickable">
      <label for="{{ form.date.id_for_label }}" class="form-label">æ—¥ä»˜</label>
      <div
        class="input-wrapper"
        onclick="showDatePicker('{{ form.date.id_for_label }}')"
      >
        {{ form.date }}
        <span class="input-icon">ğŸ“…</span>
      </div>
      {% if form.date.errors %}
      <span class="error-message">{{ form.date.errors }}</span>
      {% endif %}
    </div>

    <div class="form-group clickable">
      <label for="{{ form.start_time.id_for_label }}" class="form-label"
        >é–‹å§‹æ™‚é–“</label
      >
      <div
        class="input-wrapper"
        onclick="showTimePicker('{{ form.start_time.id_for_label }}')"
      >
        {{ form.start_time }}
        <span class="input-icon">ğŸ•’</span>
      </div>
      {% if form.start_time.errors %}
      <span class="error-message">{{ form.start_time.errors }}</span>
      {% endif %}
    </div>

    <div class="form-group clickable">
      <label for="{{ form.end_time.id_for_label }}" class="form-label"
        >çµ‚äº†æ™‚é–“</label
      >
      <div
        class="input-wrapper"
        onclick="showTimePicker('{{ form.end_time.id_for_label }}')"
      >
        {{ form.end_time }}
        <span class="input-icon">ğŸ•’</span>
      </div>
      {% if form.end_time.errors %}
      <span class="error-message">{{ form.end_time.errors }}</span>
      {% endif %}
    </div>

    <div class="form-group">
      <label for="{{ form.break_time.id_for_label }}" class="form-label"
        >ä¼‘æ†©æ™‚é–“ï¼ˆåˆ†ï¼‰</label
      >
      {{ form.break_time }} {% if form.break_time.errors %}
      <span class="error-message">{{ form.break_time.errors }}</span>
      {% endif %}
    </div>

    <div class="form-group">
      <label for="{{ form.notes.id_for_label }}" class="form-label">å‚™è€ƒ</label>
      {{ form.notes }} {% if form.notes.errors %}
      <span class="error-message">{{ form.notes.errors }}</span>
      {% endif %}
    </div>

    <div class="form-actions">
      <button type="submit" class="register-btn">
        {% if form.instance.pk %}æ›´æ–°{% else %}ç™»éŒ²{% endif %}
      </button>
      <a class="back-btn" href="{% url 'attendance:attendance_create_list' %}"
        >æˆ»ã‚‹</a
      >
    </div>
  </form>
</div>

<script>
  function showDatePicker(elementId) {
    const element = document.getElementById(elementId);
    if (element && element.type === "date") {
      element.showPicker();
    }
  }

  function showTimePicker(elementId) {
    const element = document.getElementById(elementId);
    if (element && element.type === "time") {
      element.showPicker();
    }
  }

  // å„å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¿½åŠ 
  document.addEventListener("DOMContentLoaded", function () {
    const dateTimeInputs = document.querySelectorAll(
      'input[type="date"], input[type="time"]'
    );
    dateTimeInputs.forEach((input) => {
      input.addEventListener("click", function (e) {
        e.stopPropagation(); // ãƒãƒ–ãƒªãƒ³ã‚°ã‚’åœæ­¢
        this.showPicker();
      });
    });
  });
</script>
{% endblock %}
